<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onglet 4 - Sélection du Matériau</title>
    
    <!-- Polices et bibliothèques externes -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Bodoni:ital,wght@1,400&family=Playfair+Display:wght@400;700&family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <!-- Supprimez les scripts non utilisés -->
    <!-- <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
    <!-- Supprimez PapaParse -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script> -->

    <!-- Script générique -->
    <script src="../script.js" defer></script>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <!-- Image d'en-tête -->
    <div class="header-image">
        <div class="header-overlay">ENSAM x Cartier</div> <!-- Texte superposé -->
    </div>

    <!-- Menu de navigation -->
    <header class="menu">
        <nav>
            <ul>
                <li><a href="../index.html">Accueil</a></li>
                <li><a href="onglet1.html">Onglet 1</a></li>
                <li><a href="onglet2.html">Onglet 2</a></li>
                <li><a href="onglet3.html">Onglet 3</a></li>
                <li><a href="onglet4.html">Onglet 4</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Contenu principal -->
    <main class="content">
        <h1>Analyse des impacts environnementaux par matériau</h1>
        <p>Sélectionnez un matériau pour voir les détails de son impact environnemental selon différentes méthodes de traitement de fin de vie.</p>

        <!-- Menu déroulant des matériaux -->
        <label for="materialDropdown">Choisissez un matériau :</label>
        <select id="materialDropdown">
            <option value="">Sélectionnez un matériau</option>
        </select>

        <!-- Division pour afficher les informations du matériau sélectionné -->
        <div id="materialInfo">
            <p>Sélectionnez un matériau pour voir les informations.</p>
        </div>
    </main>   
    <!-- Pied de page -->
    <div class="footer">
        <p>&copy; 2024/2025 Baptiste Légier, Pierre-Vincent Arcade, Valentin Hyaumet. Tous droits réservés.</p>
    </div>

    <!-- Script pour charger le fichier JSON et gérer l'interaction -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Charger les données JSON
        fetch('../static/json/impactfdvmat.json')
          .then(response => response.json())
          .then(data => {
            const materials = data['Feuil1'];
            const dropdown = document.getElementById('materialDropdown');
            
            // Peupler le menu déroulant
            materials.forEach(material => {
              const option = document.createElement('option');
              option.value = material['Matériau'];
              option.text = material['Matériau'];
              dropdown.add(option);
            });

            // Écouter les changements du menu déroulant
            dropdown.addEventListener('change', function() {
              const selectedMaterial = this.value;
              const materialInfoDiv = document.getElementById('materialInfo');

              if (selectedMaterial === "") {
                materialInfoDiv.innerHTML = '<p>Sélectionnez un matériau pour voir les informations.</p>';
                return;
              }

              // Trouver les données du matériau sélectionné
              const materialData = materials.find(item => item['Matériau'] === selectedMaterial);
              
              if (materialData) {
                // Construire le HTML pour afficher les informations du matériau
                materialInfoDiv.innerHTML = `
                  <h2>${materialData['Matériau']}</h2>
                  <p><strong>Incinération - Impact (kg éq. CO2/tonne) :</strong> ${materialData['Incinération - Impact (kg éq. CO2/tonne)']}</p>
                  <p><strong>Recyclage - Impact (kg éq. CO2/tonne) :</strong> ${materialData['Recyclage - Impact (kg éq. CO2/tonne)']}</p>
                  <p><strong>Méthanisation - Impact (kg éq. CO2/tonne) :</strong> ${materialData['Méthanisation - Impact (kg éq. CO2/tonne)']}</p>
                  <p><strong>Incinération - Émissions Évitées (kg éq. CO2/tonne) :</strong> ${materialData['Incinération - Émissions Évitées (kg éq. CO2/tonne)']}</p>
                  <p><strong>Recyclage - Émissions Évitées (kg éq. CO2/tonne) :</strong> ${materialData['Recyclage - Émissions Évitées (kg éq. CO2/tonne)']}</p>
                  <p><strong>Méthanisation - Émissions Évitées (kg éq. CO2/tonne) :</strong> ${materialData['Méthanisation - Émissions Évitées (kg éq. CO2/tonne)']}</p>
                `;
              } else {
                materialInfoDiv.innerHTML = '<p>Aucune donnée disponible pour ce matériau.</p>';
              }
            });

          })
          .catch(error => console.error('Erreur lors du chargement du fichier JSON :', error));
    });
// Fonction pour convertir les données JSON en format utilisable
function convertData(data) {
    return data.map(countryData => {
        const convertedCountryData = { Pays: countryData.Pays };
        Object.keys(countryData).forEach(key => {
            if (key !== "Pays") {
                // Convertir les valeurs en nombres en remplaçant la virgule par un point
                convertedCountryData[key] = parseFloat(countryData[key].replace(',', '.'));
            }
        });
        return convertedCountryData;
    });
}
    </script>

</body>
</html>
